<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Automatisierung Admin</title>
    {% include '/webserver/template/header.html' %}
    <script type="text/javascript">

        function search() {

            var value = $('.ui.search input').val();
            window.location = '/automation/admin/switchserverlist?filter=' + value;
        }

        $(function () {

            $('.ui.search i').click(function () {
                search();
            });
            $('.ui.search input').keydown(function (e) {
                if(e.which == 13) {
                    search();
                }
            });
        });
    </script>
</head>
<body>
{% include '/webserver/template/automation/admin/headline.html' with {module: 'switchserver'} %}
<main class="ui main container">
    <div class="ui segment">
        <div>
            <h2 class="ui header">Schaltserver verwalten</h2>
        </div>
        {% if success is defined %}
        <div class="ui message {% if success %}success{% else %}error{% endif %}">
            {{ message | escape }}
        </div>
        {% endif %}
        <div class="ui divider"></div>
        <div class="ui top attached menu inverted blue">
            <a class="item" href="/automation/admin/switchserverform">
                <i class="plus icon"></i> hinzuf&uuml;gen
            </a>
            <div class="right menu">
                <div class="ui right aligned category search item">
                    <div class="ui icon input">
                        <input class="prompt" type="text" placeholder="Search ..." {% if filterStr is defined %}value="{{ filterStr | escape }}"{% endif %}>
                        <i class="search link icon"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui bottom attached segment">
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>Schaltserver</th>
                        <th style="width: 50px;"></th>
                    </tr>
                </thead>
                <tbody>
                    {% if pagination.getSize() > 0 %}
                        {% for element in pagination.getCurrentPageElements() %}
                        {% set randomId = randomstr() %}
                        <tr>
                            <td {% if element.isEnabled() == false %}class="disabled"{% endif %}>
                                <h3>{{ element.getName() | escape }}</h3>
                                <p>{% if element.getDescription().isPresent() %}{{ element.getDescription().get() | escape }}{% endif %}</p>
                            </td>
                            <td>
                                <div class="ui icon buttons">
                                    <button title="bearbeiten" class="ui button" onclick="window.location = '/automation/admin/switchserverform?id={{ element.getId() }}'"><i class="edit icon orange large"></i></button>
                                    <button title="l&ouml;schen" class="ui button" onclick="$('#{{ randomId }}').modal('show')"><i class="remove red icon large"></i></button>
                                </div>
                                <div class="ui basic modal" id="{{ randomId }}">
                                    <div class="ui icon header">
                                        <i class="delete icon"></i>
                                        Schaltserver l&ouml;schen
                                    </div>
                                    <div class="content">
                                        <p>Bist du sicher das du den Schaltserver l&ouml;schen m&ouml;chtest?</p>
                                    </div>
                                    <div class="actions">
                                        <div class="ui red basic cancel inverted button">
                                            <i class="remove icon"></i>
                                            Nein
                                        </div>
                                        <div class="ui green ok inverted button" onclick="window.location = '/automation/admin/switchserverdelete?id={{ element.getId() }}'">
                                            <i class="checkmark icon"></i>
                                            Ja
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="2">
                            <div class="ui message info">
                                <p>keine Schaltserver vorhanden</p>
                            </div>
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
                {% if pagination.hasPages() %}
                <tfoot>
                    <tr>
                        <th colspan="3">
                            <div class="ui right floated pagination menu">
                                {% include '/webserver/template/automation/admin/pagination.html' with {pagination: pagination} %}
                            </div>
                        </th>
                    </tr>
                </tfoot>
                {% endif %}
            </table>
        </div>
    </div>
</main>
</body>
</html>