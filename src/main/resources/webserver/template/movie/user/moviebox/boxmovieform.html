<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Film Box Film Formular</title>
    {% include '/webserver/template/header.html' %}
</head>
<body>
{% include '/webserver/template/movie/user/headline.html' with {module: 'movie'} %}
<script type="text/javascript">

   {% if addElement == false %}

        $(function() {

            $('.ui.form').form('set values', {
                year        : "{{ movie.getYear() }}",
                disc        : "{{ movieBox.getDiscId().get() }}",
                fsk         : "{{ movie.getFskId().get() }}",
                genre       : "{{ movie.getGenreId().get() }}",
                rating      : "{{ movie.getRating() }}",
                directors   : [{% for id in movie.getDirectorIds() %}"{{ id }}",{% endfor %}],
                actors      : [{% for id1 in movie.getActorIds() %}"{{ id1 }}",{% endfor %}]
            });
        });
   {% else %}

        $(function() {

            $('.ui.form').form('set values', {
                disc        : "{{ movieBox.getDiscId().get() }}"
            });
        });
    {% endif %}
</script>
<main class="ui main container">
    <form class="ui form" action="/movie/boxmovieform?boxid={{ movieBox.getId().get() | escape }}{% if addElement == false %}&movieid={{ movie.getId().get() | escape }}{% endif %}" method="post" enctype="multipart/form-data">
        <h1 class="ui header top attached">Film {% if addElement %}hinzuf&uuml;gen{% else %}bearbeiten{% endif %}</h1>
        {% if error is defined %}
        <div class="ui visible icon message error attached">
            <i class="remove icon red"></i>
            <div class="content">
                <p>{{ error | escape }}</p>
            </div>
        </div>
        <div class="ui segment attached">
            <div class="ui button basic primary" onclick="window.history.back()">zur&uuml;ck</div>
        </div>
        {% else %}
        <div class="ui segment attached">
            <input type="hidden" name="addElement" value="{% if addElement %}1{% else %}0{% endif %}">
            <div class="equal width fields">
                <div class="field required">
                    <label>Titel</label>
                    <input name="title" placeholder="Titel ..." type="text" pattern=".{3,50}"  value="{{ movie.getTitle() | escape }}" required>
                </div>
                <div class="field">
                    <label>Untertietel</label>
                    <input name="subtitle" placeholder="Untertietel ..." pattern=".{3,50}"  type="text" value="{{ movie.getSubTitle() | escape }}">
                </div>
            </div>
            <div class="field required">
                <label>Beschreibung</label>
                <textarea name="description" required minlength="3">{{ movie.getDescription().orElse("") | escape }}</textarea>
            </div>
            <div class="equal width fields">
                <div class="field">
                    <label>Cover</label>
                    <input name="cover" type="file">
                </div>
            </div>
            <div class="equal width fields">
                <div class="field required">
                    <label>Produktionsjahr</label>
                    <select name="year" class="ui dropdown search" required>
                        <option value="">Produktionsjahr</option>
                        {% for element in yearList %}
                        <option value="{{ element }}">{{ element }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="field required">
                    <label>Medium</label>
                    <select name="disc" class="ui dropdown search" required>
                        <option value="">Medium</option>
                        {% for element in discList %}
                        <option value="{{ element.getId().get() }}">{{ element.getName() | escape }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="equal width fields">
                <div class="field required">
                    <label>Laufzeit</label>
                    <input name="duration" placeholder="0" type="number" min="1" max="15000" step="1" value="{{ movie.getDuration() }}" required>
                </div>
                <div class="field required">
                    <label>Altersfreigabe</label>
                    <select name="fsk" class="ui dropdown search" required>
                        <option value="">FSK</option>
                        {% for element in fskList %}
                        <option value="{{ element.getId().get() }}">{{ element.getName() | escape }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="equal width fields">
                <div class="field required">
                    <label>Genre</label>
                    <select name="genre" class="ui dropdown search" required>
                        <option value="">Genre</option>
                        {% for element in genreList %}
                        <option value="{{ element.getId().get() }}">{{ element.getName() | escape }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="field required">
                    <label>Bewertung</label>
                    <select name="rating" class="ui dropdown search" required>
                        <option value="0">keine</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
            </div>
            <div class="equal width fields">
                <div class="field">
                    <label>Regisseur</label>
                    <select name="directors" class="ui fluid search dropdown" multiple>
                        <option value="">Regisseur</option>
                        {% for element in directorList %}
                        <option value="{{ element.getId().get() }}">{{ element.getName() | escape }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="field">
                    <label>Schauspieler</label>
                    <select name="actors" class="ui fluid search dropdown" multiple>
                        <option value="">Schauspieler</option>
                        {% for element in actorList %}
                        <option value="{{ element.getId().get() }}">{{ element.getName() | escape }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        <div class="ui segment bottom attached">
            <div class="ui button basic secondary" onclick="window.history.back()">Zur√ºck</div>
            <button class="ui button primary" type="submit">Speichern</button>
        </div>
        {% endif %}
    </form>
</main>
</body>
</html>